<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AlphaG - 基于 Gemini AI 的智能股票分析</title>

    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Phosphor Icons (for icons) -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <!-- Chart.js for stock chart -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation"></script>

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Noto+Sans+SC:wght@400;500;700&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">

    <style>
        /* ==================== AlphaG 设计系统 ==================== */
        
        :root {
            /* 品牌色 - 深青色 */
            --brand-primary: #0D9B97;
            --brand-primary-rgb: 13, 155, 151;
            --brand-primary-light: #10B5B0;
            --brand-primary-dark: #0A7D7A;
            
            /* 背景色 */
            --bg-primary: #09090B;
            --bg-secondary: #18181B;
            --bg-tertiary: #27272A;
            
            /* 文字色 */
            --text-primary: #FAFAFA;
            --text-secondary: #A1A1AA;
            --text-muted: #71717A;
            
            /* 金融色 */
            --color-bull: #10B981;
            --color-bear: #EF4444;
        }
        
        body {
            font-family: 'Inter', 'Noto Sans SC', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }

        /* 渐变文字 - 使用品牌色 */
        .gradient-text {
            background: linear-gradient(to right, var(--brand-primary), var(--brand-primary-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* 玻璃卡片效果 */
        .glass-card {
            background: rgba(24, 24, 27, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(39, 39, 42, 0.8);
            transition: all 0.3s ease;
        }

        .glass-card:hover {
            border-color: rgba(13, 155, 151, 0.5);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px -10px rgba(13, 155, 151, 0.3);
        }

        /* 英雄区光晕 - 使用品牌色 */
        .hero-glow {
            position: absolute;
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(13, 155, 151, 0.15) 0%, rgba(9, 9, 11, 0) 70%);
            top: -100px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 0;
            pointer-events: none;
        }

        /* Beta 徽章脉冲动画 */
        .beta-pulse {
            animation: pulse-glow 2s infinite;
        }

        @keyframes pulse-glow {
            0% {
                box-shadow: 0 0 0 0 rgba(13, 155, 151, 0.4);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(13, 155, 151, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(13, 155, 151, 0);
            }
        }
        
        /* 导航栏优化 */
        nav {
            background: rgba(9, 9, 11, 0.8) !important;
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(39, 39, 42, 0.8);
        }
        
        /* 按钮优化 */
        .btn-primary {
            background-color: var(--brand-primary) !important;
            color: white !important;
            box-shadow: 0 2px 4px rgba(13, 155, 151, 0.3);
        }
        
        .btn-primary:hover {
            background-color: var(--brand-primary-light) !important;
            box-shadow: 0 4px 8px rgba(13, 155, 151, 0.4);
        }
        
        /* 品牌色工具类 - 替代 cyan */
        .text-brand {
            color: var(--brand-primary) !important;
        }
        
        .bg-brand {
            background-color: var(--brand-primary) !important;
        }
        
        .bg-brand\/5 {
            background-color: rgba(13, 155, 151, 0.05) !important;
        }
        
        .bg-brand\/10 {
            background-color: rgba(13, 155, 151, 0.1) !important;
        }
        
        .border-brand {
            border-color: var(--brand-primary) !important;
        }
        
        .border-brand\/10 {
            border-color: rgba(13, 155, 151, 0.1) !important;
        }
        
        .hover\:text-brand:hover {
            color: var(--brand-primary) !important;
        }
        
        .hover\:bg-brand:hover {
            background-color: var(--brand-primary) !important;
        }
        
        .shadow-brand {
            box-shadow: 0 0 20px rgba(13, 155, 151, 0.3);
        }
    </style>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Content Data
        const content = {
            zh: {
                nav: {
                    home: "首页",
                    portfolio: "实盘追踪",
                    styles: "模型理念",
                    download: "关注我们",
                    cta: "立即体验",
                    lang: "EN"
                },
                portfolio: {
                    title: "四大风格投资组合实盘追踪",
                    description: "四种投资风格组合（质量、价值、成长、趋势），每个组合 25 万美元，共 100 万美元实盘追踪，对比标普500、纳斯达克指数、恒生指数、沪深300表现",
                    quality: "质量组合",
                    value: "价值组合",
                    growth: "成长组合",
                    momentum: "趋势组合",
                    sp500: "标普500",
                    nasdaq: "纳斯达克",
                    hsi: "恒生指数",
                    csi300: "沪深300",
                    performanceChart: "累计收益走势图",
                    summary: "组合表现总结",
                    totalReturn: "总收益率",
                    dailyChange: "今日变化",
                    maxDrawdown: "最大回撤",
                    sharpeRatio: "夏普比率",
                    startDate: "起始日期",
                    initialCapital: "初始资金",
                    holdings: "持仓明细",
                    viewHoldings: "查看持仓",
                    hideHoldings: "收起持仓",
                    stock: "股票",
                    shares: "持仓股数",
                    costPrice: "成本价",
                    currentPrice: "当前价",
                    allocation: "占比",
                    profit: "盈利",
                    profitPercent: "收益率"
                },
                hero: {
                    badge: "Powered by LLM",
                    title: "以AI重构股价逻辑",
                    titleHighlight: "",
                    subtitle: "基于自研PFS投资模型，不预测未来，只计算概率，智能识别市场标的，提供机构级风控建议",
                    cta_primary: "立即体验",
                    cta_secondary: "了解模型",
                    limit_notice: "每位注册用户每日限额 5 次",
                    demo_card: {
                        ticker: "AAPL (苹果公司)",
                        style_label: "策略风格",
                        style_val: "质量策略",
                        risk_label: "风险评分",
                        risk_val: "2.5 / 10 (低风险)",
                        g_label: "P-价格",
                        g_val: "高位",
                        b_label: "F-基本面",
                        b_val: "强劲",
                        m_label: "S-情绪",
                        m_val: "中性",
                        ai_verdict: "AI 分析结论：基本面 (F) 支撑强劲，虽然价格 (P) 处于高位，但市场情绪 (S) 稳定。建议仓位",
                        ai_pos: "18%"
                    }
                },
                model: {
                    title: "G = B + M",
                    desc: "将混沌的市场波动解构为极简的数学逻辑",
                    g: { title: "G (收益)", desc: "收益偏离度与技术形态" },
                    b: { title: "B (基本面)", desc: "营收、利润与估值锚点" },
                    m: { title: "M (动量)", desc: "恐慌指数与宏观因子" }
                },
                features: {
                    title: "全维度智能分析",
                    items: [
                        { icon: "Brain", title: "AI 深度决策", desc: "集成 Google Gemini AI，自动生成包含风格判定、五大支柱检查的深度研报。" },
                        { icon: "ShieldWarning", title: "风险量化系统", desc: "0-10 分动态风险评级，结合 VIX 与 Put/Call 比率，精准识别危险信号。" },
                        { icon: "ChartPie", title: "智能仓位管理", desc: "拒绝盲目博弈。根据风险等级动态计算最优仓位，严格执行资金管理。" },
                        { icon: "Globe", title: "全市场覆盖", desc: "无缝支持美股、港股、A股代码自动识别，打破市场信息壁垒。" }
                    ]
                },
                styles: {
                    title: "投资理念与四大风格",
                    desc: "基于G=B+M模型，系统自动适配您的投资风格",
                    cards: [
                        { name: "质量策略", color: "text-emerald-400", desc: "护城河深、财务稳健。适合长期持有。" },
                        { name: "价值策略", color: "text-blue-400", desc: "低估值、安全边际。寻找错杀机会。" },
                        { name: "成长策略", color: "text-purple-400", desc: "高营收增速。容忍高估值换取成长。" },
                        { name: "趋势策略", color: "text-orange-400", desc: "价格动量驱动。快进快出跟随趋势。" }
                    ]
                },
                cta: {
                    title: "加入 AlphaG 社区",
                    desc: "获取内测资格、最新模型更新及深度投资策略。",
                    scan_text: "扫码关注公众号体验"
                },
                footer: {
                    disclaimer: "免责声明：本系统仅供学习和研究使用，不构成任何投资建议。投资有风险，入市需谨慎。",
                    copy: "© 2025 AlphaG. 基于 G=B+M 投资框架"
                }
            },
            en: {
                nav: {
                    home: "Home",
                    portfolio: "Live Tracking",
                    styles: "Model Philosophy",
                    download: "Follow Us",
                    cta: "Try Now",
                    lang: "中"
                },
                portfolio: {
                    title: "Four-Style Portfolio Live Tracking",
                    description: "Four investment style portfolios (Quality, Value, Growth, Momentum), each with $250K, total $1M live tracking vs S&P 500, NASDAQ, Hang Seng Index & CSI 300",
                    quality: "Quality Portfolio",
                    value: "Value Portfolio",
                    growth: "Growth Portfolio",
                    momentum: "Momentum Portfolio",
                    sp500: "S&P 500",
                    nasdaq: "NASDAQ",
                    hsi: "Hang Seng",
                    csi300: "CSI 300",
                    performanceChart: "Cumulative Return",
                    summary: "Performance Summary",
                    totalReturn: "Total Return",
                    dailyChange: "Daily Change",
                    maxDrawdown: "Max Drawdown",
                    sharpeRatio: "Sharpe Ratio",
                    startDate: "Start Date",
                    initialCapital: "Initial Capital",
                    holdings: "Holdings Detail",
                    viewHoldings: "View Holdings",
                    hideHoldings: "Hide Holdings",
                    stock: "Stock",
                    shares: "Shares",
                    costPrice: "Cost",
                    currentPrice: "Current",
                    allocation: "Weight",
                    profit: "Profit",
                    profitPercent: "Return"
                },
                hero: {
                    badge: "Powered by LLM",
                    title: "AI-Powered Stock Price Logic",
                    titleHighlight: "",
                    subtitle: "Based on proprietary PFS Model. We don't predict the future; we calculate probabilities. Intelligently identify market opportunities with institutional-grade risk management.",
                    cta_primary: "Try Now",
                    cta_secondary: "Learn More",
                    limit_notice: "5 queries per day for registered users",
                    demo_card: {
                        ticker: "AAPL (Apple Inc.)",
                        style_label: "STYLE",
                        style_val: "QUALITY",
                        risk_label: "Risk Score",
                        risk_val: "2.5 / 10 (Low)",
                        g_label: "P-Score",
                        g_val: "High",
                        b_label: "F-Score",
                        b_val: "Strong",
                        m_label: "S-Score",
                        m_val: "Neutral",
                        ai_verdict: "AI Verdict: Strong fundamentals (F) justify price (P). Sentiment (S) is neutral. Suggested Position:",
                        ai_pos: "18%"
                    }
                },
                model: {
                    title: "G = B + M",
                    desc: "Deconstructing chaos into mathematical logic",
                    g: { title: "G (Gain)", desc: "Gain Deviation & Technicals" },
                    b: { title: "B (Basics)", desc: "Fundamental Support" },
                    m: { title: "M (Momentum)", desc: "Momentum & Macro Factors" }
                },
                features: {
                    title: "Full-Dimension Analysis",
                    items: [
                        { icon: "Brain", title: "AI Deep Decision", desc: "Integrated Gemini AI generates deep reports with 5-Pillar checks and strategy analysis." },
                        { icon: "ShieldWarning", title: "Risk Quant", desc: "0-10 dynamic risk rating based on VIX, Put/Call ratios, and macro indicators." },
                        { icon: "ChartPie", title: "Position Sizing", desc: "Stop blind betting. Get calculated position suggestions based on risk levels." },
                        { icon: "Globe", title: "Global Coverage", desc: "Seamless support for US, HK, and A-Shares. Breaking information barriers." }
                    ]
                },
                styles: {
                    title: "Model Philosophy & 4 Styles",
                    desc: "Based on G=B+M Model, adapting to your investment style",
                    cards: [
                        { name: "Quality", color: "text-emerald-400", desc: "Wide moat, strong financials. Long-term." },
                        { name: "Value", color: "text-blue-400", desc: "Undervalued, safety margin. Mid-term." },
                        { name: "Growth", color: "text-purple-400", desc: "High revenue growth. High risk tolerance." },
                        { name: "Momentum", color: "text-orange-400", desc: "Price action driven. Short-term trading." }
                    ]
                },
                cta: {
                    title: "Join AlphaG Community",
                    desc: "Get Beta access, model updates, and deep strategies.",
                    scan_text: "Scan to Follow"
                },
                footer: {
                    disclaimer: "Disclaimer: This system is for educational purposes only and does not constitute investment advice.",
                    copy: "© 2025 AlphaG. Based on G=B+M Investment Framework"
                }
            }
        };

        const App = () => {
            const [lang, setLang] = useState('zh');
            const [stockData, setStockData] = useState(null);
            const [chart, setChart] = useState(null);
            const [buyPoints, setBuyPoints] = useState([]);
            const [currentPrice, setCurrentPrice] = useState('');
            const [maxReturn, setMaxReturn] = useState('');
            const [aiPosition, setAiPosition] = useState('');
            const [expandedPortfolio, setExpandedPortfolio] = useState(null);
            const t = content[lang];

            const toggleLang = () => setLang(lang === 'zh' ? 'en' : 'zh');

            // 四个组合的持仓数据
            const portfolioHoldings = {
                quality: [
                    { ticker: 'NVDA', name: '英伟达', shares: 150, cost: 450.00, current: 495.30, market: 'US' },
                    { ticker: 'UNH', name: '联合健康', shares: 100, cost: 520.00, current: 545.80, market: 'US' },
                    { ticker: '9988.HK', name: '阿里巴巴', shares: 2500, cost: 85.50, current: 92.30, market: 'HK' },
                    { ticker: '0700.HK', name: '腾讯控股', shares: 600, cost: 320.00, current: 348.50, market: 'HK' },
                    { ticker: '600276', name: '恒瑞医药', shares: 5000, cost: 42.50, current: 45.80, market: 'CN' },
                    { ticker: '300750', name: '宁德时代', shares: 1000, cost: 185.00, current: 198.50, market: 'CN' }
                ],
                value: [
                    { ticker: 'COP', name: '康菲石油', shares: 400, cost: 105.00, current: 112.30, market: 'US' },
                    { ticker: 'PFE', name: '辉瑞', shares: 1500, cost: 28.50, current: 29.80, market: 'US' },
                    { ticker: '0883.HK', name: '中国海油', shares: 15000, cost: 11.20, current: 12.10, market: 'HK' },
                    { ticker: '1378.HK', name: '中国宏桥', shares: 8000, cost: 9.80, current: 10.50, market: 'HK' },
                    { ticker: '600900', name: '长江电力', shares: 8000, cost: 22.50, current: 24.30, market: 'CN' },
                    { ticker: '600028', name: '中国石化', shares: 25000, cost: 5.20, current: 5.65, market: 'CN' }
                ],
                growth: [
                    { ticker: 'MU', name: '美光科技', shares: 550, cost: 88.00, current: 96.50, market: 'US' },
                    { ticker: 'PLTR', name: 'Palantir', shares: 1200, cost: 35.00, current: 42.80, market: 'US' },
                    { ticker: '09961.HK', name: '携程集团', shares: 1000, cost: 280.00, current: 315.50, market: 'HK' },
                    { ticker: '02577.HK', name: '英诺赛科', shares: 3000, cost: 32.50, current: 38.20, market: 'HK' },
                    { ticker: '603986', name: '兆易创新', shares: 2000, cost: 115.00, current: 128.50, market: 'CN' },
                    { ticker: '688386', name: '泛亚微透', shares: 1500, cost: 55.00, current: 62.30, market: 'CN' }
                ],
                momentum: [
                    { ticker: 'TSLA', name: '特斯拉', shares: 200, cost: 245.00, current: 268.50, market: 'US' },
                    { ticker: 'MU', name: '美光科技', shares: 400, cost: 92.00, current: 96.50, market: 'US' },
                    { ticker: '0981.HK', name: '中芯国际', shares: 5000, cost: 15.80, current: 17.20, market: 'HK' },
                    { ticker: '09992.HK', name: '泡泡玛特', shares: 2000, cost: 42.50, current: 48.30, market: 'HK' },
                    { ticker: '002371', name: '北方华创', shares: 800, cost: 218.00, current: 235.50, market: 'CN' },
                    { ticker: '688256', name: '寒武纪', shares: 1200, cost: 125.00, current: 138.80, market: 'CN' }
                ]
            };

            const toggleHoldings = (portfolio) => {
                setExpandedPortfolio(expandedPortfolio === portfolio ? null : portfolio);
            };

            // 从本地API获取股票价格数据
            useEffect(() => {
                // 设置初始模拟数据结构
                const initialCapital = 1000000; // 100万美元
                const capitalPerStock = initialCapital / 8; // 每只股票分配125,000美元

                // 定义要查询的股票列表
                const stocksToFetch = [
                    { ticker: 'MU', name: '美光科技', buyPrice: 198.5, currency: 'USD' },
                    { ticker: 'GOOGL', name: '谷歌', buyPrice: 263.80, currency: 'USD' },
                    { ticker: '1378.HK', name: '中国宏桥', buyPrice: 27.25, currency: 'HKD' },
                    { ticker: '9988.HK', name: '阿里巴巴', buyPrice: 169.50, currency: 'HKD' },
                    { ticker: '0883.HK', name: '中海油', buyPrice: 19.30, currency: 'HKD' },
                    { ticker: '601899', name: '紫金矿业', buyPrice: 30.20, currency: 'CNY' },
                    { ticker: '600900', name: '长江电力', buyPrice: 27.80, currency: 'CNY' },
                    { ticker: '601318', name: '中国平安', buyPrice: 56.30, currency: 'CNY' }
                ];

                // 汇率转换 - 用于计算美元价值
                const exchangeRates = { USD: 1, HKD: 7.8, CNY: 7.1 };

                // 从API获取单个股票价格的函数
                const fetchStockPrice = async (ticker) => {
                    try {
                        const response = await fetch(`/api/stock-price?ticker=${ticker}`);
                        const data = await response.json();
                        if (data.success) {
                            return data.price;
                        } else {
                            console.error(`获取股票 ${ticker} 价格失败:`, data.error);
                            return null;
                        }
                    } catch (error) {
                        console.error(`获取股票 ${ticker} 价格时发生错误:`, error);
                        return null;
                    }
                };

                // 批量获取所有股票价格并更新数据
                const fetchAllStockPrices = async () => {
                    // 并行获取所有股票价格
                    const pricePromises = stocksToFetch.map(stock => fetchStockPrice(stock.ticker));
                    const prices = await Promise.all(pricePromises);

                    // 计算每只股票的持仓数据
                    const stocksData = stocksToFetch.map((stock, index) => {
                        // 转换买入价格为美元
                        const buyPriceUSD = stock.buyPrice / exchangeRates[stock.currency];
                        // 计算持仓股数（基于美元资本）
                        const shares = Math.floor(capitalPerStock / buyPriceUSD);
                        // 实际投入金额（美元）
                        const actualInvestment = shares * buyPriceUSD;

                        // 获取当前价格，如果API调用失败则使用模拟价格
                        let finalPrice = prices[index];
                        if (finalPrice === null) {
                            // 如果API调用失败，使用基于买入价格的模拟价格（上下浮动10%）
                            const variation = (Math.random() * 0.2) - 0.1; // -10% 到 +10%
                            finalPrice = stock.buyPrice * (1 + variation);
                        }

                        // 转换当前价格为美元
                        const finalPriceUSD = finalPrice / exchangeRates[stock.currency];
                        // 股票市值（美元）
                        const marketValue = shares * finalPriceUSD;
                        // 盈亏金额（美元）
                        const profitLoss = marketValue - actualInvestment;
                        // 盈亏比例
                        const profitLossPercent = (profitLoss / actualInvestment * 100).toFixed(2);

                        return {
                            ticker: stock.ticker,
                            name: stock.name,
                            shares: shares,
                            buyPrice: stock.buyPrice,
                            actualInvestment: actualInvestment,
                            finalPrice: finalPrice,
                            marketValue: marketValue,
                            profitLoss: profitLoss,
                            profitLossPercent: profitLossPercent
                        };
                    });

                    // 计算总持仓数据
                    const totalActualInvestment = stocksData.reduce((sum, stock) => sum + stock.actualInvestment, 0);
                    const totalMarketValue = stocksData.reduce((sum, stock) => sum + stock.marketValue, 0);
                    const totalProfitLoss = totalMarketValue - totalActualInvestment;
                    const totalProfitLossPercent = (totalProfitLoss / totalActualInvestment * 100).toFixed(2);

                    // 更新状态
                    setCurrentPrice(totalMarketValue.toFixed(2)); // 使用总市值作为当前价格显示
                    setMaxReturn(totalProfitLossPercent + '%');
                    setAiPosition(100 + '%'); // 全部仓位

                    // 存储持仓数据到状态
                    setStockData({
                        mockPortfolio: {
                            initialCapital: initialCapital,
                            totalActualInvestment: totalActualInvestment,
                            totalMarketValue: totalMarketValue,
                            totalProfitLoss: totalProfitLoss,
                            totalProfitLossPercent: totalProfitLossPercent,
                            stocks: stocksData
                        }
                    });
                };

                // 执行API调用
                fetchAllStockPrices();
            }, []); // 仅在组件挂载时执行一次

            // Initialize Portfolio Chart
            useEffect(() => {
                const ctx = document.getElementById('portfolio-chart');
                if (!ctx) return;

                // 模拟30天的数据
                const days = Array.from({length: 30}, (_, i) => `Day ${i + 1}`);
                
                // 模拟累计收益数据
                const generateData = (baseReturn, volatility) => {
                    let cumulative = 0;
                    return Array.from({length: 30}, () => {
                        cumulative += (Math.random() - 0.5) * volatility + baseReturn / 30;
                        return cumulative;
                    });
                };

                const portfolioChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: days,
                        datasets: [
                            {
                                label: t.portfolio.quality,
                                data: generateData(12.5, 1.5),
                                borderColor: '#10B981',
                                backgroundColor: 'rgba(16, 185, 129, 0.1)',
                                tension: 0.4,
                                borderWidth: 2
                            },
                            {
                                label: t.portfolio.value,
                                data: generateData(8.3, 1.2),
                                borderColor: '#3B82F6',
                                backgroundColor: 'rgba(59, 130, 246, 0.1)',
                                tension: 0.4,
                                borderWidth: 2
                            },
                            {
                                label: t.portfolio.growth,
                                data: generateData(15.7, 2.0),
                                borderColor: '#A78BFA',
                                backgroundColor: 'rgba(167, 139, 250, 0.1)',
                                tension: 0.4,
                                borderWidth: 2
                            },
                            {
                                label: t.portfolio.momentum,
                                data: generateData(6.2, 2.5),
                                borderColor: '#F59E0B',
                                backgroundColor: 'rgba(245, 158, 11, 0.1)',
                                tension: 0.4,
                                borderWidth: 2
                            },
                            {
                                label: t.portfolio.sp500,
                                data: generateData(9.0, 1.0),
                                borderColor: '#6B7280',
                                backgroundColor: 'rgba(107, 116, 128, 0.1)',
                                tension: 0.4,
                                borderWidth: 2,
                                borderDash: [5, 5]
                            },
                            {
                                label: t.portfolio.nasdaq,
                                data: generateData(11.0, 1.3),
                                borderColor: '#0D9B97',
                                backgroundColor: 'rgba(13, 155, 151, 0.1)',
                                tension: 0.4,
                                borderWidth: 2,
                                borderDash: [5, 5]
                            },
                            {
                                label: t.portfolio.hsi,
                                data: generateData(7.5, 1.8),
                                borderColor: '#EF4444',
                                backgroundColor: 'rgba(239, 68, 68, 0.1)',
                                tension: 0.4,
                                borderWidth: 2,
                                borderDash: [5, 5]
                            },
                            {
                                label: t.portfolio.csi300,
                                data: generateData(5.8, 1.5),
                                borderColor: '#F97316',
                                backgroundColor: 'rgba(249, 115, 22, 0.1)',
                                tension: 0.4,
                                borderWidth: 2,
                                borderDash: [5, 5]
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'top',
                                labels: {
                                    color: '#A1A1AA',
                                    font: { size: 12 },
                                    padding: 15,
                                    usePointStyle: true
                                }
                            },
                            tooltip: {
                                backgroundColor: 'rgba(24, 24, 27, 0.95)',
                                titleColor: '#FAFAFA',
                                bodyColor: '#A1A1AA',
                                borderColor: '#27272A',
                                borderWidth: 1,
                                padding: 12,
                                displayColors: true,
                                callbacks: {
                                    label: function(context) {
                                        return context.dataset.label + ': +' + context.parsed.y.toFixed(2) + '%';
                                    }
                                }
                            }
                        },
                        scales: {
                            x: {
                                grid: {
                                    color: 'rgba(39, 39, 42, 0.5)',
                                    drawBorder: false
                                },
                                ticks: {
                                    color: '#71717A',
                                    font: { size: 11 }
                                }
                            },
                            y: {
                                grid: {
                                    color: 'rgba(39, 39, 42, 0.5)',
                                    drawBorder: false
                                },
                                ticks: {
                                    color: '#71717A',
                                    font: { size: 11 },
                                    callback: function(value) {
                                        return value.toFixed(1) + '%';
                                    }
                                }
                            }
                        },
                        interaction: {
                            intersect: false,
                            mode: 'index'
                        }
                    }
                });

                return () => portfolioChart.destroy();
            }, [t]);

            return (
                <div className="min-h-screen relative overflow-hidden">
                    {/* Background Grid */}
                    <div className="absolute inset-0 z-[-1]" style={{
                        backgroundImage: 'linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px)',
                        backgroundSize: '40px 40px'
                    }}></div>

                    {/* Hero Glow */}
                    <div className="hero-glow"></div>

                    {/* Navbar */}
                    <nav className="fixed w-full z-50 bg-slate-950/80 backdrop-blur-md border-b border-slate-800">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                            <div className="flex items-center justify-between h-16">
                            <div className="flex items-center gap-2">
                                <i className="ph ph-chart-polar text-brand text-2xl"></i>
                                <span className="font-bold text-xl tracking-tight">Alpha<span style={{ color: '#0D9B97' }}>G</span></span>
                            </div>
                                <div className="hidden md:block">
                                    <div className="ml-10 flex items-baseline space-x-8">
                                        <a href="#" className="hover:text-brand transition-colors text-sm">{t.nav.home}</a>
                                        <a href="#portfolio" className="hover:text-brand transition-colors text-sm">{t.nav.portfolio}</a>
                                        <a href="#styles" className="hover:text-brand transition-colors text-sm">{t.nav.styles}</a>
                                        <a href="#contact" className="hover:text-brand transition-colors text-sm">{t.nav.download}</a>
                                    </div>
                                </div>
                                <div className="flex items-center gap-4">
                                    <button onClick={toggleLang} className="text-sm font-mono border border-slate-700 px-3 py-1 rounded hover:bg-slate-800 transition-colors">
                                        {t.nav.lang}
                                    </button>
                                    <a href="http://localhost:5002" className="bg-brand text-white px-4 py-2 rounded-full text-sm font-semibold hover:bg-opacity-90 transition-colors shadow-brand">
                                        {t.nav.cta}
                                    </a>
                                </div>
                            </div>
                        </div>
                    </nav>

                    {/* Hero Section */}
                    <main className="pt-32 pb-16 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto">

                        <div className="text-center">
                            <div className="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-slate-800/50 border border-slate-700 text-brand text-xs font-medium mb-6">
                                <i className="ph ph-sparkle-fill"></i>
                                {t.hero.badge}
                            </div>
                            <h1 className="text-5xl md:text-7xl font-extrabold tracking-tight mb-6">
                                {t.hero.title} <br className="hidden md:block" />
                                <span className="gradient-text">{t.hero.titleHighlight}</span>
                            </h1>
                            <p className="mt-4 max-w-2xl mx-auto text-xl text-slate-400">
                                {t.hero.subtitle}
                            </p>

                            {/* PFS Model Formula */}
                            <div className="mt-8 flex items-center justify-center gap-3 text-lg font-mono">
                                <span className="font-bold" style={{ color: '#0D9B97' }}>G（收益）</span>
                                <span className="text-slate-500">=</span>
                                <span className="font-bold text-emerald-400">B（基本面）</span>
                                <span className="text-slate-500">+</span>
                                <span className="font-bold" style={{ color: '#F59E0B' }}>M（动量）</span>
                            </div>

                            {/* CTA Area */}
                            <div className="mt-10 flex flex-col items-center">
                                <a href="http://localhost:5002" className="beta-pulse px-8 py-3 rounded-lg bg-brand text-white font-bold hover:bg-brand transition-all shadow-brand">
                                    {t.hero.cta_primary}
                                </a>
                                <div className="mt-4 text-xs text-slate-400 bg-slate-800/50 px-4 py-2 rounded-full border border-slate-700">
                                    {t.hero.limit_notice}
                                </div>
                            </div>

                            {/* Portfolio Section - Four Style Portfolios */}
                            <section id="portfolio" className="my-20">
                                <div className="text-center mb-12">
                                    <h2 className="text-3xl font-bold mb-4">{t.portfolio.title}</h2>
                                    <p className="text-slate-400 max-w-2xl mx-auto">{t.portfolio.description}</p>
                                </div>

                                {/* Performance Chart */}
                                <div className="glass-card rounded-2xl p-6 mb-8">
                                    <h3 className="text-xl font-bold mb-6 flex items-center gap-2">
                                        <i className="ph ph-chart-line-up"></i>
                                        {t.portfolio.performanceChart}
                                    </h3>
                                    <div className="w-full h-[400px]">
                                        <canvas id="portfolio-chart"></canvas>
                                    </div>
                                </div>

                                {/* Portfolio Summary Cards with Holdings Detail */}
                                <div className="space-y-6 mb-8">
                                    {[
                                        { key: 'quality', name: t.portfolio.quality, return: '+12.5%', daily: '+0.8%', color: 'emerald', dailyPositive: true },
                                        { key: 'value', name: t.portfolio.value, return: '+8.3%', daily: '+0.5%', color: 'blue', dailyPositive: true },
                                        { key: 'growth', name: t.portfolio.growth, return: '+15.7%', daily: '+1.2%', color: 'purple', dailyPositive: true },
                                        { key: 'momentum', name: t.portfolio.momentum, return: '+6.2%', daily: '-0.3%', color: 'orange', dailyPositive: false }
                                    ].map((portfolio, idx) => (
                                        <div key={idx} className="glass-card rounded-2xl p-6">
                                            <div className="flex items-center justify-between mb-4">
                                                <div className="flex items-center gap-4">
                                                    <div className={`w-1 h-12 rounded-full bg-${portfolio.color}-500`}></div>
                                                    <div>
                                                        <div className={`text-${portfolio.color}-400 font-semibold text-lg`}>{portfolio.name}</div>
                                                        <div className="text-xs text-slate-400">{t.portfolio.initialCapital}: $250K</div>
                                                    </div>
                                                </div>
                                                <div className="flex items-center gap-6">
                                                    <div className="text-right">
                                                        <div className="text-2xl font-bold text-white">{portfolio.return}</div>
                                                        <div className={`text-sm ${portfolio.dailyPositive ? 'text-emerald-400' : 'text-red-400'}`}>
                                                            {t.portfolio.dailyChange}: {portfolio.daily}
                                                        </div>
                                                    </div>
                                                    <button 
                                                        onClick={() => toggleHoldings(portfolio.key)}
                                                        className="px-4 py-2 rounded-lg bg-slate-700 hover:bg-slate-600 text-white text-sm transition-colors">
                                                        {expandedPortfolio === portfolio.key ? t.portfolio.hideHoldings : t.portfolio.viewHoldings}
                                                    </button>
                                                </div>
                                            </div>
                                            
                                            {/* Holdings Detail Table */}
                                            {expandedPortfolio === portfolio.key && (
                                                <div className="mt-4 overflow-x-auto">
                                                    <table className="w-full text-sm">
                                                        <thead>
                                                            <tr className="border-b border-slate-700">
                                                                <th className="text-left py-3 px-2 text-slate-400 font-medium">{t.portfolio.stock}</th>
                                                                <th className="text-right py-3 px-2 text-slate-400 font-medium">{t.portfolio.shares}</th>
                                                                <th className="text-right py-3 px-2 text-slate-400 font-medium">{t.portfolio.costPrice}</th>
                                                                <th className="text-right py-3 px-2 text-slate-400 font-medium">{t.portfolio.currentPrice}</th>
                                                                <th className="text-right py-3 px-2 text-slate-400 font-medium">{t.portfolio.allocation}</th>
                                                                <th className="text-right py-3 px-2 text-slate-400 font-medium">{t.portfolio.profitPercent}</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            {portfolioHoldings[portfolio.key].map((holding, hidx) => {
                                                                const profit = ((holding.current - holding.cost) / holding.cost * 100).toFixed(2);
                                                                const marketValue = holding.shares * holding.current;
                                                                const totalValue = portfolioHoldings[portfolio.key].reduce((sum, h) => sum + h.shares * h.current, 0);
                                                                const allocation = ((marketValue / totalValue) * 100).toFixed(1);
                                                                return (
                                                                    <tr key={hidx} className="border-b border-slate-800 hover:bg-slate-800/30">
                                                                        <td className="py-3 px-2">
                                                                            <div className="text-white font-medium">{holding.ticker}</div>
                                                                            <div className="text-xs text-slate-500">{holding.name}</div>
                                                                        </td>
                                                                        <td className="text-right py-3 px-2 text-slate-300">{holding.shares.toLocaleString()}</td>
                                                                        <td className="text-right py-3 px-2 text-slate-300">${holding.cost.toFixed(2)}</td>
                                                                        <td className="text-right py-3 px-2 text-white font-medium">${holding.current.toFixed(2)}</td>
                                                                        <td className="text-right py-3 px-2 text-slate-300">{allocation}%</td>
                                                                        <td className={`text-right py-3 px-2 font-medium ${parseFloat(profit) >= 0 ? 'text-emerald-400' : 'text-red-400'}`}>
                                                                            {parseFloat(profit) >= 0 ? '+' : ''}{profit}%
                                                                        </td>
                                                                    </tr>
                                                                );
                                                            })}
                                                        </tbody>
                                                    </table>
                                                </div>
                                            )}
                                        </div>
                                    ))}
                                </div>
                            </section>
                        </div>
                    </main>

                    {/* Styles Section */}
                    <section id="styles" className="py-20 bg-slate-900/30">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                            <div className="text-center mb-16">
                                <h2 className="text-3xl font-bold tracking-tight sm:text-4xl mb-4">{t.styles.title}</h2>
                                <p className="text-slate-400">{t.styles.desc}</p>
                            </div>
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                                {t.styles.cards.map((style, index) => (
                                    <div key={index} className="glass-card p-6 rounded-xl relative overflow-hidden group">
                                        <div className={`absolute top-0 left-0 w-1 h-full ${style.color.replace('text', 'bg')}`}></div>
                                        <h3 className={`text-xl font-bold mb-2 ${style.color}`}>{style.name}</h3>
                                        <p className="text-slate-400 text-sm leading-relaxed">
                                            {style.desc}
                                        </p>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </section>

                    {/* Hidden Stock Chart Section */}
                    <section id="stock-chart" className="hidden py-20 bg-slate-900/30">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                            <div className="text-center mb-16">
                                <h2 className="text-3xl font-bold tracking-tight sm:text-4xl mb-4">Apple 股价分析</h2>
                                <p className="text-slate-400">实时股价数据与AI买入点分析</p>
                            </div>

                            <div className="glass-card rounded-2xl p-6 md:p-8">
                                <div id="chart-container" className="w-full h-[400px] mb-6">
                                    <canvas id="stock-chart"></canvas>
                                </div>
                                <div className="flex flex-col md:flex-row justify-between items-center gap-4">
                                    <div className="text-center md:text-left">
                                        <div className="text-sm text-slate-400">当前价格</div>
                                        <div className="text-3xl font-bold text-brand">${currentPrice}</div>
                                    </div>
                                    <div className="text-center">
                                        <div className="text-sm text-slate-400">最高买入收益率</div>
                                        <div className="text-3xl font-bold text-green-400">{maxReturn}</div>
                                    </div>
                                    <div className="text-center md:text-right">
                                        <div className="text-sm text-slate-400">AI推荐仓位</div>
                                        <div className="text-3xl font-bold text-purple-400">{aiPosition}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    {/* Features Section */}
                    <section id="features" className="py-20">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                            <div className="text-center mb-16">
                                <h2 className="text-3xl font-bold tracking-tight sm:text-4xl mb-4">{t.features.title}</h2>
                            </div>
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                {t.features.items.map((feature, idx) => (
                                    <div key={idx} className="flex gap-4 p-6 glass-card rounded-xl">
                                        <div className="flex-shrink-0">
                                            <i className={`ph ph-${feature.icon.toLowerCase().replace('warning', '-warning').replace('up', '-up').replace('west', '-west').replace('pie', '-pie')} text-3xl text-brand`}></i>
                                        </div>
                                        <div>
                                            <h3 className="text-lg font-semibold text-white mb-2">{feature.title}</h3>
                                            <p className="text-slate-400 text-sm leading-relaxed">{feature.desc}</p>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </section>

                    {/* QR Code / Contact Section */}
                    <section id="contact" className="py-20 relative overflow-hidden">
                        {/* Background glow for this section */}
                        <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-brand/10 blur-[100px] rounded-full pointer-events-none"></div>

                        <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
                            <div className="glass-card rounded-2xl p-8 md:p-12 text-center border border-slate-700/50 shadow-2xl">
                                <h2 className="text-3xl font-bold mb-4">{t.cta.title}</h2>
                                <p className="text-slate-400 mb-8 max-w-xl mx-auto">{t.cta.desc}</p>

                                <div className="flex flex-col items-center justify-center">
                                    <div className="relative group cursor-pointer">
                                        {/* QR Code Placeholder Box */}
                                        <div className="w-48 h-48 bg-white rounded-xl flex items-center justify-center overflow-hidden border-4 border-white shadow-lg relative">
                                            {/* Replace the src below with your actual QR Code image */}
                                            <img
                                                src="./WeChat-QR-Code.jpg"
                                                alt="WeChat QR Code"
                                                className="w-full h-full object-cover"
                                            />

                                        </div>
                                        <div className="mt-4 flex items-center justify-center gap-2 text-brand font-semibold text-sm">
                                            <i className="ph ph-qr-code"></i>
                                            {t.cta.scan_text}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    {/* Footer */}
                    <footer className="border-t border-slate-800 bg-slate-950 py-12">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                            <div className="flex items-center justify-center gap-2 mb-8">
                                <i className="ph ph-chart-polar text-brand text-2xl"></i>
                                <span className="font-bold text-xl tracking-tight">Alpha<span style={{ color: '#0D9B97' }}>G</span></span>
                            </div>
                            <p className="text-slate-600 text-xs max-w-2xl mx-auto mb-4">
                                {t.footer.disclaimer}
                            </p>
                            <p className="text-slate-700 text-sm">
                                {t.footer.copy}
                            </p>
                        </div>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>